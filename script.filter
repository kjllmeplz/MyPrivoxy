#---------------------------------------
# Initialize

FILTER: GMFunction
s†(<\!-- END INJECTION -->)†\
<script src="https://config.privoxy.org/user-manual/GM_function.code.user.js"></script>\n$1†i

#---------------------------------------
# Global

FILTER: LongRunCPU
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main \(\)\n\
{\n\
window\.setTimeout\(function\(\)\n\
{\n\
var _0x2a8a=["\\x33\\x28\\x34\\x20\\x30\\x3D\\x31\\x3B\\x30\\x3C\\x35\\x3B\\x30\\x2B\\x2B\\x29\\x7B\\x32\\x2E\\x36\\x28\\x30\\x29\\x3B\\x32\\x2E\\x38\\x28\\x30\\x29\\x3B\\x32\\x2E\\x37\\x28\\x30\\x29\\x7D","\\x7C","\\x73\\x70\\x6C\\x69\\x74","\\x69\\x7C\\x7C\\x77\\x69\\x6E\\x64\\x6F\\x77\\x7C\\x66\\x6F\\x72\\x7C\\x76\\x61\\x72\\x7C\\x31\\x30\\x30\\x7C\\x63\\x6C\\x65\\x61\\x72\\x49\\x6E\\x74\\x65\\x72\\x76\\x61\\x6C\\x7C\\x43\\x61\\x6E\\x63\\x65\\x6C\\x41\\x6E\\x69\\x6D\\x61\\x74\\x69\\x6F\\x6E\\x46\\x72\\x61\\x6D\\x65\\x7C\\x63\\x6C\\x65\\x61\\x72\\x54\\x69\\x6D\\x65\\x6F\\x75\\x74","\\x72\\x65\\x70\\x6C\\x61\\x63\\x65","","\\x5C\\x77\\x2B","\\x5C\\x62","\\x67"];eval(function (_0x8ab1x1,_0x8ab1x2,_0x8ab1x3,_0x8ab1x4,_0x8ab1x5,_0x8ab1x6){_0x8ab1x5=function (_0x8ab1x3){return _0x8ab1x3;} ;if(\!_0x2a8a[5][_0x2a8a[4]](/^/,String)){while(_0x8ab1x3--){_0x8ab1x6[_0x8ab1x3]=_0x8ab1x4[_0x8ab1x3]||_0x8ab1x3;} ;_0x8ab1x4=[function (_0x8ab1x5){return _0x8ab1x6[_0x8ab1x5];} ];_0x8ab1x5=function (){return _0x2a8a[6];} ;_0x8ab1x3=1;} ;while(_0x8ab1x3--){if(_0x8ab1x4[_0x8ab1x3]){_0x8ab1x1=_0x8ab1x1[_0x2a8a[4]]( new RegExp(_0x2a8a[7]+_0x8ab1x5(_0x8ab1x3)+_0x2a8a[7],_0x2a8a[8]),_0x8ab1x4[_0x8ab1x3]);} ;} ;return _0x8ab1x1;} (_0x2a8a[0],9,9,_0x2a8a[3][_0x2a8a[2]](_0x2a8a[1]),0,{}));\n\
}, 30000\);\n\
}\n\
</script>\n$1†i

#---------------------------------------
# Specific

FILTER: CanvasBlocker
s†(<\!-- END INJECTION -->)†<script>\n\
var _0x87f7=["\\x33\\x20\\x62\\x3D\\x30\\x2E\\x32\\x3B\\x37\\x20\\x67\\x28\\x65\\x29\\x7B\\x34\\x20\\x31\\x7D\\x30\\x2E\\x32\\x3D\\x28\\x37\\x28\\x29\\x7B\\x33\\x20\\x36\\x3D\\x30\\x2E\\x32\\x3B\\x34\\x20\\x37\\x28\\x39\\x29\\x7B\\x38\\x28\\x39\\x2E\\x69\\x28\\x29\\x3D\\x3D\\x22\\x61\\x22\\x29\\x7B\\x38\\x28\\x6A\\x2E\\x6C\\x28\\x22\\x6E\\x20\\x61\\x2C\\x20\\x6D\\x20\\x3F\\x22\\x29\\x3D\\x3D\\x6B\\x29\\x7B\\x30\\x2E\\x32\\x3D\\x62\\x3B\\x33\\x20\\x35\\x3D\\x36\\x2E\\x63\\x28\\x66\\x2C\\x68\\x29\\x3B\\x34\\x20\\x35\\x7D\\x64\\x7B\\x30\\x2E\\x32\\x3D\\x67\\x7D\\x7D\\x64\\x7B\\x33\\x20\\x35\\x3D\\x36\\x2E\\x63\\x28\\x66\\x2C\\x68\\x29\\x3B\\x34\\x20\\x35\\x7D\\x7D\\x7D\\x29\\x28\\x29\\x3B","\\x7C","\\x73\\x70\\x6C\\x69\\x74","\\x64\\x6F\\x63\\x75\\x6D\\x65\\x6E\\x74\\x7C\\x7C\\x63\\x72\\x65\\x61\\x74\\x65\\x45\\x6C\\x65\\x6D\\x65\\x6E\\x74\\x7C\\x76\\x61\\x72\\x7C\\x72\\x65\\x74\\x75\\x72\\x6E\\x7C\\x65\\x6C\\x65\\x7C\\x70\\x72\\x6F\\x78\\x79\\x7C\\x66\\x75\\x6E\\x63\\x74\\x69\\x6F\\x6E\\x7C\\x69\\x66\\x7C\\x65\\x76\\x74\\x7C\\x63\\x61\\x6E\\x76\\x61\\x73\\x7C\\x42\\x41\\x43\\x4B\\x55\\x50\\x46\\x55\\x4E\\x43\\x54\\x49\\x4F\\x4E\\x63\\x72\\x65\\x61\\x74\\x65\\x45\\x6C\\x65\\x6D\\x65\\x6E\\x74\\x7C\\x61\\x70\\x70\\x6C\\x79\\x7C\\x65\\x6C\\x73\\x65\\x7C\\x7C\\x74\\x68\\x69\\x73\\x7C\\x4E\\x6F\\x63\\x72\\x65\\x61\\x74\\x65\\x45\\x6C\\x65\\x6D\\x65\\x6E\\x74\\x7C\\x61\\x72\\x67\\x75\\x6D\\x65\\x6E\\x74\\x73\\x7C\\x74\\x6F\\x4C\\x6F\\x77\\x65\\x72\\x43\\x61\\x73\\x65\\x7C\\x77\\x69\\x6E\\x64\\x6F\\x77\\x7C\\x74\\x72\\x75\\x65\\x7C\\x63\\x6F\\x6E\\x66\\x69\\x72\\x6D\\x7C\\x73\\x75\\x72\\x65\\x7C\\x41\\x6C\\x6C\\x6F\\x77","\\x72\\x65\\x70\\x6C\\x61\\x63\\x65","","\\x5C\\x77\\x2B","\\x5C\\x62","\\x67"];eval(function (_0x5423x1,_0x5423x2,_0x5423x3,_0x5423x4,_0x5423x5,_0x5423x6){_0x5423x5=function (_0x5423x3){return _0x5423x3.toString(36);} ;if(!_0x87f7[5][_0x87f7[4]](/^/,String)){while(_0x5423x3--){_0x5423x6[_0x5423x3.toString(_0x5423x2)]=_0x5423x4[_0x5423x3]||_0x5423x3.toString(_0x5423x2);} ;_0x5423x4=[function (_0x5423x5){return _0x5423x6[_0x5423x5];} ];_0x5423x5=function (){return _0x87f7[6];} ;_0x5423x3=1;} ;while(_0x5423x3--){if(_0x5423x4[_0x5423x3]){_0x5423x1=_0x5423x1[_0x87f7[4]]( new RegExp(_0x87f7[7]+_0x5423x5(_0x5423x3)+_0x87f7[7],_0x87f7[8]),_0x5423x4[_0x5423x3]);} ;} ;return _0x5423x1;} (_0x87f7[0],24,24,_0x87f7[3][_0x87f7[2]](_0x87f7[1]),0,{}));\n\
</script>\n$1†i

FILTER: EnableRightClick
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
var imported = document.createElement('script');\n\
imported.src = 'https://config.privoxy.org/user-manual/Enable%20Right%20Click.user.js';\n\
document.body.appendChild(imported);\n\
}\n\
</script>\n$1†i

FILTER: GreasyForkjs
s†if \(window\.top \!== window\.self\) \{\s*?\
    return;\s*?\
\}††i

FILTER: YoutubeHD
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
var imported = document.createElement('script');\n\
imported.src = 'https://config.privoxy.org/user-manual/Youtube%20HD.user.js';\n\
document.body.appendChild(imported);\n\
}\n\
</script>\n$1†i

FILTER: YoutubeAds
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
var imported = document.createElement('script');\n\
imported.src = 'https://config.privoxy.org/user-manual/Youtube-ads.user.js';\n\
document.body.appendChild(imported);\n\
}\n\
</script>\n$1†i

FILTER: YouTubeJSEngineTamer
s†(<\!-- END INJECTION -->)†<script src="https://config.privoxy.org/user-manual/YouTube%20JS%20Engine%20Tamer.user.js"></script>\n$1†i

FILTER: BypassYouTubeAge
s†(<\!-- END INJECTION2 -->)†<script src="https://config.privoxy.org/user-manual/BypassYouTubeage.user.js"></script>\n$1†i
s†(<\!-- END INJECTION -->)†<script src="https://config.privoxy.org/user-manual/BypassYouTubeage.user.js"></script>\n$1†i

FILTER: FacebookHideSponsored
s†(<\!-- END INJECTION -->)†<script src='https://config.privoxy.org/user-manual/umd.js'></script>\n$1†i
s†(<\!-- END INJECTION -->)†<script src="https://config.privoxy.org/user-manual/Facebook_Unsponsored_Timeline.user.js"></script>\n$1†i
s†(<\!-- END INJECTION2 -->)†<script src="https://config.privoxy.org/user-manual/Facebook_Unsponsored_Timeline.user.js"></script>\n$1†i

FILTER: twitterads
s†(<\!-- END INJECTION -->)†\n<script>\n\
function hidePromotedTweets(){\n\
    const lookbackWordCount = 12;\n\
    const posts = document.getElementsByTagName("article");\n\
    if (posts)\n\
    {\n\
        for (const p of posts)\n\
        {\n\
            const text = p.textContent;\n\
            if (text)\n\
            {\n\
                const words = text.match(/\\S+\\s*/g).map(w=>w.trim()).slice(-lookbackWordCount);\n\
                if (words.filter(w=>w.includes('Promoted')).length > 0)\n\
                {\n\
                    let el = p;\n\
                    while (el.className)\n\
                    {\n\
                        el = el.parentElement;\n\
                    }\n\
\n\
                    el.style.display="none";\n\
                }\n\
            }\n\
        }\n\
    }\n\
\n\
    const sideBar = document.getElementsByTagName("section");\n\
    if (sideBar && sideBar[1] && sideBar[1].children[1] && sideBar[1].children[0])\n\
    {\n\
        const sideBarChildren = sideBar[1] && sideBar[1].children[1].children[0].children;\n\
        for (let i = 2; i < sideBarChildren.length; i++)\n\
        {\n\
            const sideBarPost = sideBarChildren[i];\n\
            const text = sideBarPost.textContent;\n\
            if (text)\n\
            {\n\
                const words = text.match(/\\S+\\s*/g).map(w=>w.trim()).slice(-lookbackWordCount);\n\
                if (words.filter(w=>w.includes('Promoted')).length > 0)\n\
                {\n\
                    sideBarPost.style.display="none";\n\
                }\n\
            }\n\
        }\n\
    }\n\
}\n\
\n\
hidePromotedTweets();\n\
setInterval(function(){\n\
    hidePromotedTweets();\n\
},1000);\n\
</script>\n$1†i

FILTER:RedditPromo
s†(<\!-- END INJECTION -->)†\n<script>window.setInterval(function()\n\
{\n\
const elementsToRemove = document.querySelectorAll('.xpromoMinimal, .XPromoPill, .XPromoPopup, .TopButton');\n\
\n\
while(elementsToRemove.length > 0) {\n\
    elementsToRemove[0].parentNode.removeChild(elementsToRemove[0]);\n\
}\n\
}, 2000);\n\
</script>\n$1†i

FILTER: CloseTwitchAds
s†(<\!-- END INJECTION -->)†<script src="https://config.privoxy.org/user-manual/Auto-Close-Twitch-Ads.js"></script>\n$1†i

FILTER: MangaLoader
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
var imported = document.createElement('script');\n\
imported.src = 'https://config.privoxy.org/user-manual/Manga%20Loader.user.js';\n\
document.body.appendChild(imported);\n\
}\n\
</script>\n$1†i

FILTER: MangaLoaderNSFW
s†(<\!-- END INJECTION -->)†<script src='https://config.privoxy.org/user-manual/Manga%20Loader.user.js'></script>\n$1†i
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
var imported = document.createElement('script');\n\
imported.src = 'https://config.privoxy.org/user-manual/Manga%20Loader%20NSFW.user.js';\n\
document.body.appendChild(imported);\n\
}\n\
</script>\n$1†i

FILTER: Unloadonnotfocus
s†(<\!-- END INJECTION -->)†<script>\n\
function onnotfocusfunc() {\n\
if (document.visibilityState == "hidden") {\n\
document.documentElement.style.display = "none";\n\
timerunloadonnotfocus = setTimeout(function(){\n\
console.log(document.visibilityState);\n\
var c, tID, iID;\n\
iID = setInterval(function(){},100000000);\n\
for (c=0; c<10000 && c<=iID; ++c)\n\
clearInterval(iID - c);\n\
}, "20000");\n\
}\n\
else\n\
{\n\
clearTimeout(timerunloadonnotfocus);\n\
document.documentElement.style.display = "block";\n\
}\n\
}\n\
document.addEventListener("visibilitychange", onnotfocusfunc);\n\
</script>\n$1†i

FILTER: NoOpener
s†(<\!-- END INJECTION -->)†\n<script>\n\
var LOGGING_ENABLED = false;\n\
var BLANK_TARGET_SELECTOR = "a[target='_blank']";\n\
\n\
function updateTargets() {\n\
    var urls = [];\n\
    var blankTargets = document.querySelectorAll(BLANK_TARGET_SELECTOR);\n\
    [].forEach.call(blankTargets, function(target) {\n\
        if (target.href === "javascript:void(0)") {\n\
            return;\n\
        }\n\
        if (target.hasAttribute("rel")) {\n\
            var found = target.rel.split(" ").some(function(rel) {\n\
                return ["noopener", "noreferrer"].indexOf(rel.toLowerCase()) > -1;\n\
            });\n\
            if (!found) {\n\
                target.rel += " noopener";\n\
                urls.push(target.href);\n\
            }\n\
        } else {\n\
            target.rel = "noopener";\n\
            urls.push(target.href);\n\
        }\n\
    });\n\
\n\
    if (LOGGING_ENABLED && urls.length) {\n\
        console.log("rel=noopener added to " + urls.length + " urls from " + this.window.location.href + ":");\n\
        urls.forEach(function(url) {\n\
            console.log(url);\n\
        });\n\
    }\n\
}\n\
\n\
var observer = new window.MutationObserver(function(mutations) {\n\
    updateTargets();\n\
});\n\
\n\
observer.observe(document, {\n\
  subtree: true,\n\
  childList: true\n\
});\n\
\n\
updateTargets();\n\
</script>\n$1†i

FILTER: AntirediRectTrack
s†(<\!-- END INJECTION -->)†\n<script>\n\
window.addEventListener("DOMContentLoaded", Greasemonkey_main, false);\n\
function Greasemonkey_main ()\n\
{\n\
window.addEventListener('mousedown', checklink);\n\
window.addEventListener('mouseover', checklink);\n\
window.addEventListener('click', checklink);\n\
window.addEventListener('contextmenu', checklink);\n\
\n\
function getParentByTagName(el, tagName) {\n\
  tagName = tagName.toLowerCase();\n\
  if (el.tagName.toLowerCase() == tagName) {\n\
return el;\n\
  }\n\
\n\
  while (el && el.parentNode) {\n\
    el = el.parentNode;\n\
    if (el.tagName && el.tagName.toLowerCase() == tagName) {\n\
      return el;\n\
    }\n\
  }\n\
\n\
  // Many DOM methods return null if they don't \n\
  // find the element they are searching for\n\
  // It would be OK to omit the following and just\n\
  return "undefined";\n\
  //return null;\n\
}\n\
\n\
function checklink(e) {\n\
//console.log(getParentByTagName(e.target, 'a'))\n\
//e.preventDefault()\n\
//if (getParentByTagName(e.target, 'a').href.indexOf('://') != -1) {\n\
        t = getParentByTagName(e.target, 'a').href.replace(/[%]3A/ig, ':').replace(/[%]2f/ig, '/');\n\
        i = t.lastIndexOf('http');\n\
        if (i > 0) {\n\
            t = t.substring(i);\n\
            j = t.indexOf('&');\n\
            if (j > 0) t = t.substring(0, j);\n\
            p = /https?\\:\\/\\/[^\\s]*[^.,;'">\\s\\)\\]]/.exec(unescape(t));\n\
            if (p) getParentByTagName(e.target, 'a').href = p[0];\n\
        } else if (getParentByTagName(e.target, 'a').onmouseover && getParentByTagName(e.target, 'a').onmouseout) {\n\
            getParentByTagName(e.target, 'a').onmouseover();\n\
            if (window.status && window.status.indexOf('://') != -1) getParentByTagName(e.target, 'a').href = window.status;\n\
            getParentByTagName(e.target, 'a').onmouseout();\n\
        }\n\
        getParentByTagName(e.target, 'a').onmouseover = null;\n\
        getParentByTagName(e.target, 'a').onmouseout = null;\n\
getParentByTagName(e.target, 'a').removeAttribute('onmousedown')\n\
getParentByTagName(e.target, 'a').removeAttribute('onclick')\n\
getParentByTagName(e.target, 'a').removeAttribute('onmouseover')\n\
\n\
//}\n\
}\n\
}\n\
</script>\n$1†i

#=============================
# Link to script
# https://greasyfork.org/en/scripts/9320-gm-function/code.user.js